<?php $this->yellow->layout("header") ?>

<h1><?php echo $this->yellow->page->getHtml("titleContent") ?></h1>
<?php echo $this->yellow->page->getContentHtml() ?>

<?php $pages = $this->yellow->content->index()->filter("layout", "blog")->sort("published", false) ?>

<nav class="tags-container">
    <?php 
    // 1. Group the tags by their first letter/digit
    $groupedTags = [];
    foreach ($pages->group("tag") as $tag => $collection) {
        $firstChar = mb_strtoupper(mb_substr($tag, 0, 1));
        $groupedTags[$firstChar][$tag] = $collection;
    }
    // 2. Sort the groups (A-Z, 0-9)
    ksort($groupedTags);
    ?>

    <div class="tags-grid">
        <?php foreach ($groupedTags as $letter => $tags): ?>
            <div class="tag-group">
                <h2 class="tag-letter"><?php echo htmlspecialchars($letter) ?></h2>
                <ul class="tag-list">
                    <?php foreach ($tags as $tag => $collection): ?>
                        <li class="tag-item">
                            <a href="<?php echo $this->yellow->page->getBase() . "/blog/" . $this->yellow->lookup->normaliseArguments("tag:$tag") ?>" 
                               title="Tag: <?php echo htmlspecialchars($tag) ?>">
                                <?php echo htmlspecialchars($tag) ?>
                            </a>
                        </li>
                    <?php endforeach ?>
                </ul>
            </div>
        <?php endforeach ?>
    </div>
</nav>

<style>
.tags-container {
    padding: 2rem;
    font-family: sans-serif; /* Match your site's font */
}

.tags-grid {
    display: grid;
    /* Creates columns that are at least 200px wide */
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 3rem;
    align-items: start;
}

.tag-letter {
    font-size: 2.5rem;
    font-weight: 800;
    margin: 0 0 1rem 0;
    color: #333;
}

.tag-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.tag-item {
    margin-bottom: 0.5rem;
}

.tag-item a {
    text-decoration: none;
    color: #4A90E2; /* The blue color from your image */
    font-size: 1.1rem;
    transition: color 0.2s ease;
}

.tag-item a:hover {
    color: #2c5aa0;
    text-decoration: underline;
}

/* Adjust for larger screens to ensure 4 columns like the image */
@media (min-width: 1024px) {
    .tags-grid {
        grid-template-columns: repeat(4, 1fr);
    }
}
  
</style>

<?php $this->yellow->layout("footer") ?>
