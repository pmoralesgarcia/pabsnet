<?php $this->yellow->layout("header") ?>

<h1><?php echo $this->yellow->page->getHtml("titleContent") ?></h1>
<?php echo $this->yellow->page->getContentHtml() ?>

<?php $pages = $this->yellow->content->index()->filter("layout", "blog")->sort("published", false) ?>

<nav class="tags-container">
    <?php 
    // 1. Group the tags by their first letter/digit
    $groupedTags = [];
    foreach ($pages->group("tag") as $tag => $collection) {
        $firstChar = mb_strtoupper(mb_substr($tag, 0, 1));
        $groupedTags[$firstChar][$tag] = $collection;
    }
    // 2. Sort the groups (A-Z, 0-9)
    ksort($groupedTags);
    ?>

    <div class="tags-grid">
        <?php foreach ($groupedTags as $letter => $tags): ?>
            <div class="tag-group">
                <h2 class="tag-letter"><?php echo htmlspecialchars($letter) ?></h2>
                <ul class="tag-list">
                    <?php foreach ($tags as $tag => $collection): ?>
                        <li class="tag-item">
                            <a href="<?php echo $this->yellow->page->getBase() . "/blog/" . $this->yellow->lookup->normaliseArguments("tag:$tag") ?>" 
                               title="Tag: <?php echo htmlspecialchars($tag) ?>">
                                <?php echo htmlspecialchars($tag) ?>
                            </a>
                        </li>
                    <?php endforeach ?>
                </ul>
            </div>
        <?php endforeach ?>
    </div>
</nav>

<style>

  
</style>

<?php $this->yellow->layout("footer") ?>
